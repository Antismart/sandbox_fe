@import url("https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Refreshed palette (Indigo / Violet focus) */
  --app-background: #0f1016; /* deep neutral */
  --app-foreground: #f5f7fb;
  --app-foreground-muted: #9aa2b5;
  --app-accent: #6366f1; /* indigo-500 */
  --app-accent-hover: #5458e6;
  --app-accent-active: #474ad6;
  --app-accent-light: #262b48; /* subtle indigo wash */
  --app-gray: #181b24;
  --app-gray-dark: #222734;
  --app-card-bg: rgba(255, 255, 255, 0.05);
  --app-card-border: rgba(99, 102, 241, 0.25);
  /* Decorative gradients */
  --app-gradient: radial-gradient(circle at 30% 20%, #3730a3 0%, rgba(15,16,22,0) 60%), radial-gradient(circle at 80% 70%, #4f46e5 0%, rgba(15,16,22,0) 55%);
}

@media (prefers-color-scheme: dark) {
  :root {
    --app-background: #0f1016;
    --app-foreground: #f5f7fb;
    --app-foreground-muted: #9aa2b5;
    --app-accent: #818cf8; /* slightly lighter for dark mode */
    --app-accent-hover: #707bf6;
    --app-accent-active: #6366f1;
    --app-accent-light: #262b48;
    --app-gray: #181b24;
    --app-gray-dark: #222734;
    --app-card-bg: rgba(129, 140, 248, 0.05);
    --app-card-border: rgba(129, 140, 248, 0.35);
  }
}

.mini-app-theme {
  --ock-font-family: "Geist", sans-serif;
  --ock-border-radius: 0.75rem;
  --ock-border-radius-inner: 0.5rem;

  /* Text colors */
  --ock-text-inverse: var(--app-background);
  --ock-text-foreground: var(--app-foreground);
  --ock-text-foreground-muted: var(--app-foreground-muted);
  --ock-text-error: #ef4444;
  --ock-text-primary: var(--app-accent);
  --ock-text-success: #22c55e;
  --ock-text-warning: #f59e0b;
  --ock-text-disabled: #a1a1aa;

  /* Background colors */
  --ock-bg-default: var(--app-background);
  --ock-bg-default-hover: var(--app-gray);
  --ock-bg-default-active: var(--app-gray-dark);
  --ock-bg-alternate: var(--app-gray);
  --ock-bg-alternate-hover: var(--app-gray-dark);
  --ock-bg-alternate-active: var(--app-gray-dark);
  --ock-bg-inverse: var(--app-foreground);
  --ock-bg-inverse-hover: #2a2a2a;
  --ock-bg-inverse-active: #3a3a3a;
  --ock-bg-primary: var(--app-accent);
  --ock-bg-primary-hover: var(--app-accent-hover);
  --ock-bg-primary-active: var(--app-accent-active);
  --ock-bg-primary-washed: var(--app-accent-light);
  --ock-bg-primary-disabled: #80a8ff;
  --ock-bg-secondary: var(--app-gray);
  --ock-bg-secondary-hover: var(--app-gray-dark);
  --ock-bg-secondary-active: #d1d1d1;
  --ock-bg-error: #fee2e2;
  --ock-bg-warning: #fef3c7;
  --ock-bg-success: #dcfce7;
  --ock-bg-default-reverse: var(--app-foreground);

  /* Icon colors */
  --ock-icon-color-primary: var(--app-accent);
  --ock-icon-color-foreground: var(--app-foreground);
  --ock-icon-color-foreground-muted: #71717a;
  --ock-icon-color-inverse: var(--app-background);
  --ock-icon-color-error: #ef4444;
  --ock-icon-color-success: #22c55e;
  --ock-icon-color-warning: #f59e0b;

  /* Line colors */
  --ock-line-primary: var(--app-accent);
  --ock-line-default: var(--app-gray-dark);
  --ock-line-heavy: #a1a1aa;
  --ock-line-inverse: #d4d4d8;
}

* {
  touch-action: manipulation;
}

body {
  color: var(--app-foreground);
  background: var(--app-background);
  background-image: var(--app-gradient);
  background-attachment: fixed;
  font-family: var(--font-geist-sans), sans-serif;
  font-optical-sizing: auto;
  font-weight: 400;
  font-style: normal;
}

/* Reusable glass gradient card */
.card {
  position: relative;
  border-radius: 1rem;
  padding: 1rem 1.1rem 1.15rem;
  background: linear-gradient(165deg, rgba(255,255,255,0.07) 0%, rgba(255,255,255,0.03) 60%);
  backdrop-filter: blur(14px) saturate(140%);
  -webkit-backdrop-filter: blur(14px) saturate(140%);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 2px 4px -2px rgba(0,0,0,0.4), 0 8px 24px -6px rgba(0,0,0,0.45);
}
.card::before {
  content: "";
  position: absolute;
  inset: 0;
  padding: 1px; /* gradient border width */
  border-radius: inherit;
  background: linear-gradient(130deg, rgba(99,102,241,0.7), rgba(147,51,234,0.5), rgba(56,189,248,0.5));
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.8;
  transition: opacity .4s ease;
}
.card.card-muted::before { opacity: 0.35; }
.card-hover { transition: transform .35s cubic-bezier(.4,.2,.2,1), box-shadow .35s ease; }
.card-hover:hover { transform: translateY(-3px); }
.card-hover:hover::before { opacity: 1; }
.card-header { font-size: .85rem; font-weight: 600; letter-spacing: .5px; text-transform: uppercase; opacity: .9; margin-bottom: .35rem; }
.card-divider { height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent); margin: .6rem 0 .75rem; }

@media (hover:none) {
  .card-hover:hover { transform:none; }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

.animate-fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

.animate-fade-out {
  animation: fadeOut 3s forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes fadeSlide {
  0% { opacity: 0; transform: translateY(6px); }
  60% { opacity: 1; }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes winnerPop {
  0% { transform: scale(.9); box-shadow: 0 0 0 0 rgba(16,185,129,0.0); }
  40% { transform: scale(1.03); box-shadow: 0 0 0 6px rgba(16,185,129,0.15); }
  70% { transform: scale(1); box-shadow: 0 0 0 2px rgba(16,185,129,0.1); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(16,185,129,0.0); }
}

.animate-winner-pop { animation: winnerPop .9s cubic-bezier(.34,1.56,.64,1); }

/* Progress ring container */
.urgency-ring { position: relative; display:inline-flex; align-items:center; justify-content:center; }
.urgency-ring svg { width: 26px; height: 26px; transform: rotate(-90deg); overflow: visible; }
.urgency-badge { position:absolute; font-size:9px; padding:2px 6px; border-radius:6px; font-weight:600; letter-spacing:.3px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); }

@keyframes ringProgress { from { stroke-dashoffset: var(--start); } to { stroke-dashoffset: var(--end); } }
.ring-anim { stroke-dashoffset: var(--start); animation: ringProgress var(--duration) linear forwards; }

/* Toasts */
.toast-container { position: fixed; bottom: 0.75rem; left: 0; right: 0; display:flex; flex-direction:column; align-items:center; gap:.5rem; z-index:60; pointer-events:none; }
.toast { pointer-events:auto; font-size:.7rem; background:rgba(24,27,36,0.85); color:var(--app-foreground); border:1px solid rgba(255,255,255,0.08); padding:.6rem .9rem; border-radius:.65rem; backdrop-filter:blur(10px) saturate(140%); box-shadow:0 4px 14px -4px rgba(0,0,0,.5); display:flex; align-items:center; gap:.5rem; animation:fadeSlide .4s ease both; }
.toast-success { border-color:rgba(34,197,94,0.35); }
.toast-info { border-color:rgba(99,102,241,0.35); }
.toast-danger { border-color:rgba(251,113,133,0.35); }
